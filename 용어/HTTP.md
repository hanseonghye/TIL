# HTTP

웹 서버와 웹 클라이언트 사이에서 데이터를 주고받기 위해 사용하는 통신 방식.

TCP/IP프로토콜 위에서 작동한다.

- 요청과 응답을 통한 통신 구조

- 클라이언트의 요청에 의해 통신 시작

- 상태가 없는(Stateless) 프로토콜

  - Stateless

    요청과 응답이 과거의 상태 내용을 모른다는 것. 이러한 한계를 극복하기 위해 쿠키나 세션 등의 기술이 쓰인다.



### HTTP 메서드

GET, POST외에 PUT, DELETE, TRACE등의 메서드를 제한하기도 한다. 이 메서드 들이 악성코드등을 쉽게 업로드 하거나 주요자원들을 삭제할 수 있고, 서버의 보안 취약점을 알 수 있는 정보를 제공하기 때문이다.



### 헤더 필드

- Accept

  클라이언트 혹은 브라우저가 서버에게 자신이 받을 수 있는 데이터 종류나 언어 등을 알리는 것.

- Cache-ontrol

  캐시의 만료 시간을 지정

  ```
  Cache-Control: max-age = 0
  ```

  위의 경우는 값에 0을 넣어 항상 최신 데이터를 요청한다.

- Kepp-Alive

  http1.1 버전에서는 http의 stateless 구조에 따른 자원 낭비를 줄이고자 일정 대기 시간을 둔다.

  ```
  Kepp-Alive: timeout = 5, max=100
  ```

  위의 경우 5초 이내 클라이언트가 요청하면 서버는 연결을 끊지 않고 대기한다는 뜻이다. 다만 그 요청 횟수는 100회까지 제한한다.



### http 응답 코드

- 200 (OK) : 정상적인 요청에 정상적으로 응답함.
- 206 (partial content) : 서버가 일부 콘테츠를 전송하였음.
- 301 (moved permanently) : 현재 요청한 페이지는 영구적으로 다른 주소로 이동됐음.
- 302 (moved temporarily) :현재 요청된 페이지는 임시로 다른 주소로 이동됐음.
- 304 (not modified) : 마지막 접속 요청 후 페이지가 변경되지 않았음.
- 403 (forbidden) : 요청된 주소는 접근이 막혀있음.
- 404 (not found) : 요청된 페이지를 찾을 수 없음.
- 500 (internal server error) : 서버에 오류가 생겨 해당 요청을 처리할 수 없음.



### HTTPS

HTTP Secure로 SSL( or TLS )을 통해 보호된다. 서버와 클라이언트 사이의 정보가 암호화 되어서 전송됨. 따라서 주고 받는 데이터를 중간에 도청해도 그 내용이 암호화 되어서 알아 들을 수 없음.

------

### WebSocket

http의 경우 클라이언트 --> 서버로 단방향 통신만 가능하며, 한번의 통신이 완료된후 연결을 끊어 버린다. 또한 http 헤더의 경우 너무 많은 데이터를 가지고 있다. 반면 클라와 서버와의 연결을 끊지않는 웹소켓을 통해 양방향 통신이 가능해 졌으며 실시간으로 갑벼고 더 빠른 통신을 제공한다.

##### 원리

웹소켓 연결 설정을 하기 위해 먼저 클라와 서버간의 http기반의 핸드셰이크가 요청된다.

교환이 성공하면 사용된 tcp 연결 정보를 사용하여 응용프로그램 계층 프로톸놀이 http에서 웹소켓으로 프로토콜을 변경한다. 이제 이제 웹소켓 연결이 닫힐 때 까지 둘 사이에서 양방향 통신이 가능해진다.

실시간 게임, 채팅, 최신 디스플레이 등에 사용됨.

