# :heart: WEB :blue_heart:

## RPC vs REST

...TODO

---

## Web Server vs Web Application Server

### Web Server

웹 클라이언트의 요청을 받아서 요청을 처리하고 그 결과를 웹 클라이언트에게 응답함.

정적인 페이지 (html, css, js , 이미지 만드로 이루어진 페이지) 파일을 웹 클라이언트에 제공할 때 사용.

ex) Apache httpd, Nginx 



### Web Application Server (WAS)

웹 서버로부터 동적 페이지 요청을 받아서 요청을 처리함. ( web server ----- 정적페이지 전달 -----> WAS )

was는 실행결과를 웹 서버에 전달해 주며 웹 서버는 전달받은 응답 결과를 웹 클라이언트에 전송한다.

* 동적 페이지 

  동일한 요청에도 상황에( 누가, 언제 ... ) 따라 다른 내용이 반환되는 페이지.

  ex) jsp, asp

ex) Apache Tomcat, Jeus 



was가 정적, 동적 페이지 모두 처리하는 것 보다 정적은 was가 동적은 web server가 처리하는 것이 성능에 좋다. web server는 캐시, 프록시, 프로세스 관리 등 페이지를 처리하는 것 외에도 많은 기능을 한다.

but 최근의 was는 web server보다 성능이 좋다고 한다. 다만 로드밸런싱을 위해서라면 web server와 사용해도 좋다.

---

### Cookie

클라이언트 로컬에 클라이언트의 상태 정보를 저장하고 있는 작은 데이터 파일. 키와 값으로 이루어짐.

일정 시간동안 저장된다. --> 로그인 상태 유지에 활용

- 사용사례

  자동 로그인, 일주일 동안 보지 않기 팝업, 쇼핑몰의 장바구니

- 쿠키의 제한

  하나의 도메인당 20개의 값만 가질 수 있다.

- 만료시간을 설정할 수 있지만, 파일로 저장되기 때문에 브라우저를 종료해도 계속 정보가 남을 수 있다.

### Session

일정 시간동안 같은 브라우저로 부터 들어오는 일련의 요구를 하나의 상태로 보고 그 상태를 유지하는 기술 --> 웹 브라우저를 통해 웹 서버에 접속한 이후로 브라우저를 종료할 때 까지 유지할 수 있다.

쿠키에 아이디 비밀번호와 같은 정보를 저장하면 3자에 의해 도용당할 수 있다. 이러한 위험성 때문에 세션이 등장함.

클라가 요청을 보내면 서버의 엔진이 클라에게 유일한 ID를 부여함 --> 세션ID

클라이언트 또한 이 세션 ID를 가지고 있어서 쿠키를 사용해 저장한다. 클라이언트는 다시 접속 할 때 쿠키에 저장된 세션 ID를 서버에 전달함.

- 세션 사용 사례

  로그인 정보 유지

- 서버에서 접근하므로 보안 굿.

- 저장 할 수 있는 데이터의 한도 없음.

- 세션은 언제 삭제 되는가?

  - 최종 접속으로부터 일정 시간이 경과한 세션 정보는 자동적으로 삭제된다. --> 세션 타임아웃
  - 사용자가 로그아웃할 시 삭제된다.

세션은 서버의 자원이기 때문에 무분별하게 세션을 사용하면 서버측에서 힘이 든다! --> 쿠키를 사용하는 이유 중 하나.

### Cache

캐시는 이미지,css,js 파일등이 사용자의 브라우저에 저장되는 것! --> 한번 캐시에 저장되면 이 캐시를 참고하기 때문에 자원을 아낄 수 있다.

https://jeong-pro.tistory.com/80?category=793347



## CGI ( Common Gateway Interface )

:arrow_forward: 웹서버가 CGI 스크립트 ( php, jsp, asp ...)들과 통신하는 방법

:arrow_forward: **웹 서버와 프로그램 사이에 데이터를 주고 받는 규칙.**

웹 서버는 클라이언트가 요청한 프로그램을 찾아서 실행하고, 수행한 후 그 결과를 웹 서버에 돌려준다. 그럼 웹 서버는 http형식에 맞춰서 웹브라우저에게 보내 클라이언트가 요청한 결과를 볼수 있게 된다. 이때 웹 서버와 프로그램 사이에서 데이터를 주고 받는 규칙을 CGI라고 한다.

##### 작동 원리

웹 서버가 클라이언트로부터 받은 요청을 웹 서버상에서 작동하는 프로그램에 보낸다. 프로그램은 요청을 참조해 HTML( or 다른 문법이 정해진 데이터 )을 생성한 다음 서버에 돌려보낸다. 그러면 웹 서버는 프로그램으로부터 받은 HTML을 마치 미리 준비돼 있었다는 듯이 웹 어플리케이션에 보낸다.

#### CGI를 둘러싼 문제점

웹 브라우저에서 요청이 올때마다 CGI를 통해 프로세스를 기동했다. 이때문에 시간을 필요로했고, 많은 접속자가 있는 사이트에서는 프로그램의 기동 처리가 많아져 요청을 따라잡기 힘들어 졌다.  --> 현재는 많은 개선사항이 있다.



## 서블릿 ( Servlet ) 과 JSP

### 서블릿

클라이언트의 요청에 따른 결과를 자바로 짠 프로그램. 자바로 만든 CGI프로그램을 서블릿이라한다.

웹 서버와 같은 프로세스 속에서 생성하는 프로그램이 작동하기 때문에 매번 프로세스를 기동할 필요가 없다.

#### 서블릿의 문제점

자바코드로 html페이지를 만드는 것은 어려운 작업이며 테스트도 불편하다. 언어의 한계!!

#### JSP의 탄생

이런 상황을 개선하기 위해 JSP(Java Server Pages)가 등장했다.

html에서 동적으로 출력하고 싶은 부분을 특정 태크를 통해 표현한다.



## Load Balancing

하나의 인터넷 서비스가 발생하는 트래픽이 많을 때 여러대의 서버가 분산처리하여 서비의 로드율 증가, 부하량, 속도저하 등을 고려하여 적절히 분산처리하여 해결해주는 서비스





