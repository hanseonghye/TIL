# hook

- 컴포넌트에 기능을 추가할 때 사용하는 함수.
  - ex) 컴포넌트에 상탯값 추가, 자식 요소에 접근
  - 리액트 16.8에 추가됨
    - 그 전에는클래스형 컴포넌트를 사용



## 대표하는 두가지 hook



### useState

초기값을 넣어서 호출하고, 배열(상태값, 상태값 변경함수)을 반환한다.  

효율을 위해 비동기이면서 batch로(16ms 단위로 변경된 상태 값들을 모아서 한번 rendering) 처리된다.





### useEffect(함수)

부수효과를 관리 (ex. api, 이벤트 핸들러 처리)

렌더링 결과가 실제 dom에 반영된 뒤, 비동기로 호출됨

   

### useEffect(함수 , 배열) !! 꼭필요할 때만 사용

두번째 인자로 배열을 넣는 경우, 이 배열 값이 변경될 때만 함수를 실행한다.

api를 호출하는 함수인 경우, 렌더링을 할 때마다 api를 호출하는 것은 비효율적이다.

이럴때 사용한다.

이때 배열을 의존성 배열이라고 한다.

```react
  useEffect(() => {
        getUserApi(userId).then(data => setUser(data))
    }, [userId]) //빈 배열을 넣으면, mount 된 이후에 한 번만 호출된다. --> 그렇게 짜면 안됨.
```

그렇다면 의존성 배열에는 어떤 값들을 넣어줘야 할까 ?

-> 컴포넌트의 상태값, 속성값, 컴포넌테에서 정의된 지역변수& 지역 함수

이때 상태값 변경 함수는 제외



## Hook 사용 시 지켜야 할 규칙

1. 하나의 컴포넌트에서 훅을 호출하는 순서는 항상 같아야 한다.

2. 훅은 함수형 컴포넌트 또는 커스텀 훅 안에서만 호출되어야 한다.

   -> 클래스형 컴포넌트, 일반 함수에서 XXX