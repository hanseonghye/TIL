# 클래스형 뷰 (CBV)

클래스형 뷰는 상속과 믹스인 기능을 이용하여 코드를 재사용하고 뷰를 체계적으로 구성할 수 있다.



### CBV의 장점

- GET, POST 등 HTTP 메소드에 따른 처리를 작성할 때, `if`함수 대신에 메소드 명으로 코드의 구조가 깔끔하다.
- 다중 상속 같은 객체지향 기법을 활용해, 제너릭 뷰, 믹스인 클래스 등을 사용해 코드의 재사용과 개발 생산성을 높여준다.



### CBV 사용 가이드 라인

- 뷰는 간단 명료해야 한다.
- 뷰 코드의 양은 적으면 적을수록 좋다.
- 뷰 안에서 같은 코드를 반복적으로 사용하지 않는다.
- 뷰는 프레젠테이션 로직에서 관리하고, 비즈니스 로직은 모델에서 처리한다.
- 403, 404, 500 에러 핸들링에는 FBV를 이용한다.



### 클래스형 뷰의 시작점

클래스형 뷰는 `URLconf`에서의 사용으로 시작한다.

``` python
urlpatterns = [
    # /
    path('', AlbumLV.as_view(), name='index'),
    ...
]
```

클래스형 뷰는 클래스로 진입하기 위한 진입 메소드를 제공하는데, 이것이 위 에서의 `as_view()`메소드 이며, 아래의 순서로 요청을 처리한다.

- `as_view()` 메소드에서 클래스의 인스턴스를 생성한다.
- 생성된 인스턴스의 `dispatch()` 메소드를 호출한다.
- `dispatch()` 메소드는 요청을 검사해서 HTTP의 메소드(GET, POST)를 알아낸다.
- 인스턴스 내에 해당 이름을 갖는 메소드로 요청을 중계한다.
- 해당 메소드가 정의되어 있지 않으면 `HttpResponseNotAllowed`를 발생시킨다.





<https://wikidocs.net/9623>

<http://ruaa.me/django-view/>